<div class="container-fluid">
  <div class="row mx-3">
    <% poetries.each do |poetry| %>
      <div class="col-3 my-3">
        <div class="poems text-center">
          <div class="card card-body border-0">
            <% path = local_assigns[:trick] ? url_for(controller: trick, action: 'show', id: poetry) : [ poetry ] %>
            <%= link_to poetry.title, path, class: "card-title text-success h5" %>
            <small class="card-subtitle mb-2 text-muted"><%= poetry.dynasty %> - <%= poetry.author %></small>
            <div class="card-text">
              <% if poetry.content.size > 4 %>
                <% poetry.content.first(3).each do |line| %>
                  <p><%= line %></p>
                <% end %>
                <p>.........</p>
              <% else %>
                <% poetry.content.each do |line| %>
                  <p><%= line %></p>
                <% end %>
              <% end %>
            </div>
          </div>
          <div id="work-flip-<%= poetry.id %>">
            <%= render 'shared/flip', work: poetry %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
