<div class="container-fluid">
  <div class="row mx-3">
    <% cis.each do |ci| %>
      <div class="col-4 col-lg-4 col-md-4 col-sm-6 my-3">
        <div class="poems text-center">
          <div class="card card-body border-0">
            <% path = local_assigns[:trick] ? url_for(controller: trick, action: 'show', id: ci) : [ ci ] %>
            <%= link_to ci.title, path, class: "card-title text-success h5" %>
            <small class="card-subtitle mb-2 text-muted"><%= ci.dynasty %> - <%= ci.author %></small>
            <div class="card-text">
              <% if ci.content.size > 4 %>
                <% ci.content.first(3).each do |line| %>
                  <p><%= line %></p>
                <% end %>
                <p>.........</p>
              <% else %>
                <% ci.content.each do |line| %>
                  <p><%= line %></p>
                <% end %>
              <% end %>
            </div>
          </div>
          <div id="work-flip-<%= ci.id %>">
            <%= render 'shared/flip', work: ci %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
